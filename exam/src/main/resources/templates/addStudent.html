<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
  <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<head>
<!-- 验证是否登录 -->
<c:import url="yanzheng.jsp"></c:import>  
<!-- 验证是否登录 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>添加会员</title>

		<script type="text/javascript" src="js/jquery-2.1.0.js" ></script>
		<script src="js/base.js"></script>
		<link href="css/bootstrap-3.3.4.css" rel="stylesheet">
		
		<link href="css/base.css" rel="stylesheet">
		<link href="css/cutter.css" rel="stylesheet">

		<style type="text/css">		
				.wai {
		width: 800px;
		margin: 0px auto;
		
	}
	.panel-heading h4{
		font-weight: bold;
	}
	.nav1{
		position:relative;
		top:5px;
		text-indent: 2em;
		font-size: 14px;
		color: gray;
		font-weight: bold;
	}
	.buttons button{
	
		position: relative;
		left: 100px;
	}
	#sub{
		margin-right: 40px;
	}
				



				
		@font-face {
  				font-family: 'iconfont';
  				src: url('fonts/iconfont.eot');
  				src: url('fonts/iconfont.eot?#iefix') format('embedded-opentype'),
  				url('fonts/iconfont.woff') format('woff'),
  				url('fonts/iconfont.ttf') format('truetype'),
  				url('fonts/iconfont.svg#iconfont') format('svg');
			}
		.error-tip{
			font-size: 12px;
			color: red;
			font-family: 'iconfont';
			display: inline-block;
			border: 0px solid red;
			width: 300px;
			position: relative;
			top: 0px;
			}
			
			.spana{
			font-size: 12px;
			color: red;
			font-family: 'iconfont';
			display: inline-block;
			border: 0px solid red;
			width: 100px;
			position: relative;
			top: 0px;
			}
			
			
		</style>
	


</head>
<body>

			<div class="wai">
				<form action="#" method="post" id="doAddStu">
						<div class="panel panel-primary magin_center mydiv" >
						<div class="panel-heading"><h4>添加会员</h4></div>
						<div class="panel-body">
							<table class="table table-hover">
							
						<tr>
							<td class="nav1">用户名</td>
							<td>
								<input type="text" name="uname" id="qes_head_uname" value="" placeholder="请输用户名" style="width: 200px;"/>
								<span class="error-tip spana"></span>
							</td>
						</tr>
							
							
						<tr>
							<td class="nav1">姓名</td>
							<td>
								<input type="text" name="name" id="qes_head_name" value="" placeholder="请输姓名" style="width: 200px;"/>
								<span class="error-tip"></span>
							</td>
						</tr>
							
							
					<tr>
							<td class="nav1">性别</td>
							<td>
								<select name="qes_sub" id="gender" >
									<option  selected value="2">请选择</option >
									<option value="0"> 女 </option >
									<option value="1"> 男 </option >
								</select>
							</td>
						</tr>
						
						
							
						
						<input type="hidden" value="123456" name="pwd" id="qes_head_pwd" value="" placeholder="请输入密码" style="width: 200px;"/>
								
						
					
						
						<tr>
							<td class="nav1">用户权限</td>
							<td>
								<select name="qes_sub" id="role" >
									<option  selected value="0">  请选择	</option >
								<c:forEach items="${list_role }" var="r">
									<option value="${r.res_id }">${ r.res_name}</option >
								</c:forEach>
								</select>
							</td>
						</tr>
						
						<tr align="center">
							<td colspan="2" class="buttons">
							
								<button type="submit" class="btn btn-primary" id="sub"> 添 加 </button>
								<button type="reset" class="btn btn-warning"> 重 置 </button>
							</td>
						</tr>
					</table>
						</div>
				</div>
				
				</form>
					
</div>


</body>
<script type="text/javascript" ></script>
	<script type="text/javascript">
			$(function(){
				//选择完成后修改提交地址
				$("#gender").change(function(){
					var role=$("#role option:selected").val();
					var gender=$("#gender option:selected").val();
					$("form[id=doAddStu]").attr("action","doAddStu?gender="+gender+"&role="+role);
					
				});
				
				$("#role").change(function(){
					var role=$("#role option:selected").val();
					var gender=$("#gender option:selected").val();
					$("form[id=doAddStu]").attr("action","doAddStu?gender="+gender+"&role="+role);
					
				});
				
			})
			
					
//--------------------------------------------------------验证--------------------------------------------------------
	//-----------------用户名-------------------	
			var boo_uname = false;
			var boo_name = false;
			var boo_pwd = false;
						
			//ajax 添加学生用户名验证
			
			
			$("#qes_head_uname").keyup(function(){
					
					var uname=$(this).val();
					
					$.post("Ajax_stu_uname",{"stu_uname":uname},function(data){
						
						if(data=="*该用户名已存在!"){
							$(".spana").html(data);
							$("#sub").attr("disabled","true");
							boo_uname = false;
							
						}else if(data=="*用户名不能为空!"){
							$(".spana").html(data);
							$("#sub").attr("disabled","true");
							boo_uname = false;
						}else{
							$(".spana").html(data);
							boo_uname = true;
							myblock ();
						}
						
						
					})
					
				})
	//--------------------姓名---------------------

		var users_name = document.getElementById("qes_head_name");
		var name_box = document.getElementById("qes_head_name");
		users_name.onfocus=function(){
			name_box.style.borderColor='dodgerblue';
			name_box.style.color='dodgerblue';
		}
		var span_e = name_box.nextElementSibling;
		users_name.onblur=function(){
			name_box.style.borderColor='#969896';
			name_box.style.color='#969896';
//			if(users_name.value.indexOf("@")==-1 || users_name.value.indexOf(".")==-1){
//				span_e.innerHTML="&#xe80d; Email地址应包含@和.！"
//			}
//		if(users_name.value==""){
//				span_e.innerHTML="&#xe655; 姓名不能为空！";
//			}else if(users_name.value.length<3 || users_name.value.length>6){
//				span_e.style.color='red';
//				span_e.innerHTML="&#xe80d; 姓名应为3到6位！"
//			}else{
//				span_e.style.color='green';
//				span_e.innerHTML="&#xe6bb; 姓名可用";
//			}
			//姓名正则
			var uPattern = /[\u4E00-\u9FA5]{2,4}/;
			if(users_name.value=="" || !uPattern.test(users_name.value)){
				span_e.style.color='red';
				span_e.innerHTML="&#xe80d; 姓名不符合规范！"
				$("#sub").attr("disabled","true");
				boo_name = false;	
			}else{
				span_e.style.color='green';
				span_e.innerHTML="&#xe6bb; 姓名可用";
				$("#sub").removeAttr("disabled");
				boo_name = true;
				

			}
		}
		//--------------------密码---------------------

//		var pass = document.getElementById("qes_head_pwd");
	//	var three_f = document.getElementById("qes_head_pwd");
		//pass.onfocus=function(){
			//three_f.style.borderColor='dodgerblue';
			//three_f.style.color='dodgerblue';
//			three_f.className="three_f active";
		//}
		//var span_p = three_f.nextElementSibling;
		//pass.onblur=function(){
			//three_f.style.borderColor='#969896';
			//three_f.style.color='#969896';
			//if(pass.value==""){
				//span_p.innerHTML="&#xe655; 密码不能为空！";
				//$("#sub").attr("disabled","true");
				//boo_pwd = false;
		//	}else if(pass.value.length<3 || pass.value.length>16){
//				span_p.style.color='red';
//				span_p.innerHTML="&#xe80d; 密码应为3到16位！"
//				$("#sub").attr("disabled","true");
//				boo_pwd = false;
//
	//		}else{
	//			span_p.style.color='green';
		//		span_p.innerHTML="&#xe6bb; 密码可用";
				//$("#sub").removeAttr("disabled");
			//	boo_pwd = true;
				//myblock ();

		//	}	
		//}
		//function myblock () {
			//if(boo_name==true&&boo_uname==true&&boo_pwd==true){
				//$("#sub").removeAttr("disabled");
			//}
		//}
		
				//密码强度正则，最少6位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符
//		var pwd = /^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;
//			if(pass.value=="" || !pwd.test(pass.value)){
//				span_p.style.color='red';
//				span_p.innerHTML="&#xe80d; 密码不符合规范！"
//				$("#sub").attr("disabled","true");
//				boo_pwd = false;
//			}else{
//				span_p.style.color='green';s
//				span_p.innerHTML="&#xe6bb; 密码可用";
//				$("#sub").attr("disabled","true");
//				boo_pwd = true;
//			}
//
	</script>

</html>